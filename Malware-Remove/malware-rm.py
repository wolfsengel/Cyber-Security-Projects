import os
import subprocess

def remove_malware():
    """Elimina malware de un sistema infectado."""
    
    # Listar procesos sospechosos
    suspicious_processes = []
    process_output = subprocess.check_output(['ps', 'aux'])
    for line in process_output.splitlines():
        if b'python' in line or b'wget' in line or b'curl' in line:
            suspicious_processes.append(line.split()[1])
    
    # Matar procesos sospechosos
    for pid in suspicious_processes:
        os.kill(int(pid), 9)
        
    # Eliminar archivos maliciosos
    os.system('find / -name "*.py" -delete')
    os.system('find / -name "*.sh" -delete')
    os.system('find / -name "*.exe" -delete')
    
    # Restaurar archivos infectados
    os.system('cp /etc/passwd.backup /etc/passwd')
    os.system('cp /etc/hosts.backup /etc/hosts')
    
    print("Malware eliminado con Ã©xito.")

# Ejemplo de uso
remove_malware()
